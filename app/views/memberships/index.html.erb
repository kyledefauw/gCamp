<div class="page-header">
  <div class="pull-right">
    <%= link_to "Edit", edit_project_path(@project), class:"btn btn-info" %>
    <%= link_to "Delete", project_path(@project), method: :delete, class:"btn btn-danger" %>
  </div>
  <h1><%= @project.name %></h1>
</div>

<ol class="breadcrumb">
  <li><%= link_to "Projects", projects_path %></li>
  <li><%= @project.name %></li>
  <li>Memberships</li>
</ol>

<div class="well">
  <%= form_for [@membership], url: project_memberships_path(@project), html: {class: "form-inline"}  do |f| %>

    <%= f.collection_select(:user_id, User.all, :id, :full_name, {prompt: "Please select a user..."}, {class: "form-control"}) %>
    <%= f.collection_select(:role, Membership.roles.keys, :to_s, :to_s, {}, {class: "form-control"}) %>
    <%= f.submit 'Add New Member', class: 'btn btn-primary' %>

    <% end %>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-7">
      <table>
        <tbody>
          <% @project.memberships.each do |membership| %>
            <% if membership.id %>
              <%= form_for [@project, membership] do |f| %>
                <tr>
                  <td> <%= link_to membership.user.full_name, user_path(membership.user) %></td>
                  <td> <%= f.select(:role, [['Member', :member,], ['Owner', :owner]], {}, {class: "form-control"}) %></td>
                  <td> <%= f.submit "Update", class: "btn btn-primary" %></td>
                  <td> <%= link_to "", project_memberships_path(@project, membership), method: :delete, class: "glyphicon glyphicon-remove" %></td>
                </tr>
              <% end %>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

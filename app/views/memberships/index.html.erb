<div class="page-header">
  <h1><%= @project.name + ": Manage Members" %></h1>
</div>

<ol class="breadcrumb">
  <li><%= link_to "Projects", projects_path %></li>
  <li><%= link_to @project.name, project_path(@project) %></li>
  <li>Memberships</li>
</ol>

<% if @membership.errors.any? %>
  <div class= "row">
    <div class= "col-md-7">
      <div class= "alert alert-danger">
        <h3><%= pluralize(@membership.errors.count, "error") %> prohibited this form from being saved:</h3>
          <% @membership.errors.full_messages.each do |message| %>
            <li><%= message %></li>
            <% end %>
      </div>
    </div>
  </div>
<% end %>

<div class="well">
  <%= form_for [@membership], url: project_memberships_path(@project), html: {class: "form-inline"}  do |f| %>

    <%= f.collection_select(:user_id, User.all, :id, :full_name, {prompt: "Please select a user..."}, {class: "form-control"}) %>
    <td> <%= f.select(:role, [['Member', :member,], ['Owner', :owner]], {}, {class: "form-control"}) %></td>
    <%= f.submit 'Add New Member', class: 'btn btn-primary' %>

    <% end %>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-7">
      <table class="table">
        <tbody>
          <% @project.memberships.each do |membership| %>
            <% if membership.id %>
              <%= form_for [@project, membership] do |f| %>
                <tr>
                  <td> <%= link_to membership.user.full_name, user_path(membership.user) %></td>
                  <td> <%= f.select(:role, [['Member', :member,], ['Owner', :owner]], {}, {class: "form-control"}) %></td>
                  <td> <%= f.submit "Update", class: "btn btn-primary" %></td>
                  <td> <%= link_to "", project_membership_path(@project, membership), method: :delete, class: "glyphicon glyphicon-remove" %></td>
                </tr>
              <% end %>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
